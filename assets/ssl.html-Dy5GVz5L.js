import{_ as n,c as e,b as a,o as l}from"./app-DUNtouPH.js";const i={};function c(d,s){return l(),e("div",null,s[0]||(s[0]=[a(`<h2 id="ssl证书生成" tabindex="-1"><a class="header-anchor" href="#ssl证书生成"><span>SSL证书生成</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"># Centos 7</span>
<span class="line"># 安装snapd (另一种包管理工具)</span>
<span class="line">sudo yum install snapd</span>
<span class="line">sudo systemctl enable --now snapd.socket</span>
<span class="line">sudo snap install core; sudo snap refresh core</span>
<span class="line">sudo snap install --classic certbot</span>
<span class="line">sudo ln -s /var/lib/snapd/snap /snap</span>
<span class="line"></span>
<span class="line"># 安装certbot</span>
<span class="line"># snap 安装</span>
<span class="line">sudo snap install --classic certbot</span>
<span class="line">sudo ln -s /snap/bin/certbot /usr/bin/certbot</span>
<span class="line"># yum 安装</span>
<span class="line">sudo yum install certbot</span>
<span class="line">sudo yum install certbot python2-certbot-nginx</span>
<span class="line"></span>
<span class="line">PS: </span>
<span class="line">错误: ImportError: &#39;pyOpenSSL&#39; module missing required functionality. Try upgrading to v0.14 or newer.</span>
<span class="line">执行</span>
<span class="line">sudo pip uninstall requests</span>
<span class="line">sudo pip uninstall urllib3</span>
<span class="line">sudo yum remove python-urllib3</span>
<span class="line">sudo yum remove python-requests</span>
<span class="line">sudo yum install python-urllib3</span>
<span class="line">sudo yum install python-requests</span>
<span class="line">sudo yum install certbot</span>
<span class="line"></span>
<span class="line"># 生成证书</span>
<span class="line">sudo certbot certonly --nginx -d domain</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"># 不用CA的自签名证书</span>
<span class="line">1. 生成私钥</span>
<span class="line">openssl genrsa -out ssl.key 1024</span>
<span class="line">2. 创建签名请求</span>
<span class="line">openssl req -new -key ssl.key -out ssl.csr</span>
<span class="line">3. 创建自签名证书</span>
<span class="line">openssl x509 -req -in ssl.csr -signkey ssl.key -out ssl.crt</span>
<span class="line">4. 一行命令版</span>
<span class="line">openssl req -x509 -nodes -days 1024 -newkey rsa:4096 -keyout local.key -out local.crt</span>
<span class="line"></span>
<span class="line"># 创建 根CA 及自签名证书</span>
<span class="line"></span>
<span class="line">1. 生成CA根证书秘钥</span>
<span class="line">openssl genrsa -out CA.key 2048</span>
<span class="line">2. 生成CA根证书申请文件</span>
<span class="line">openssl req -new -key CA.key -out CA.csr</span>
<span class="line">3. 创建一个自当前日期起为期十年的根证书CA.crt：</span>
<span class="line">openssl x509 -req -days 3650 -sha1 -extensions v3_ca -signkey CA.key -in CA.csr -out CA.crt </span>
<span class="line"></span>
<span class="line">4. 生成服务私钥</span>
<span class="line">openssl genrsa -out server.key 2048 </span>
<span class="line">5. 创建签名请求</span>
<span class="line">openssl req -new -key server.key -out server.csr</span>
<span class="line">6. 创建服务器证书</span>
<span class="line">openssl x509 -req -days 3650 -sha1 -extensions v3_ca -CA CA.crt -CAkey CA.key -CAcreateserial -in server.csr -out server.crt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2)]))}const r=n(i,[["render",c]]),v=JSON.parse('{"path":"/security/ssl.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1754642790000,"contributors":[{"name":"lsj","username":"lsj","email":"lishaojie@aithu.com","commits":1,"url":"https://github.com/lsj"}],"changelog":[{"hash":"68c8fe668940c6c2d5e4fcf94e88aebaeecb290d","time":1754642790000,"email":"lishaojie@aithu.com","author":"lsj","message":"updte"}]},"filePathRelative":"security/ssl.md"}');export{r as comp,v as data};
