import{_ as n,c as a,b as e,o as l}from"./app-DUNtouPH.js";const p={};function i(t,s){return l(),a("div",null,s[0]||(s[0]=[e(`<h2 id="命令速查表" tabindex="-1"><a class="header-anchor" href="#命令速查表"><span>命令速查表</span></a></h2><p><img src="https://ling-root-bucket.oss-cn-hangzhou.aliyuncs.com/picgo/011500266295799.jpg" alt=""></p><h2 id="git配置代理" tabindex="-1"><a class="header-anchor" href="#git配置代理"><span>Git配置代理</span></a></h2><h3 id="http-https代理" tabindex="-1"><a class="header-anchor" href="#http-https代理"><span>http/https代理</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 注意将对应的代理地址及端口更换为自己对应的值</span></span>
<span class="line">HTTP 代理</span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">&quot;http://127.0.0.1:10809&quot;</span></span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy <span class="token string">&quot;http://127.0.0.1:10809&quot;</span></span>
<span class="line"></span>
<span class="line">Socket5 代理</span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">&quot;socks5://127.0.0.1:10808&quot;</span></span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy <span class="token string">&quot;socks5://127.0.0.1:10808&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ssh代理" tabindex="-1"><a class="header-anchor" href="#ssh代理"><span>ssh代理</span></a></h3><ul><li><p>windows</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"># 编辑文件地址 ~/.ssh/config</span>
<span class="line"># connect 命令已经内置 connect 命令, 需要配置路径(xx:\\xxx\\Git\\mingw64\\bin)到环境变量才可以使用</span>
<span class="line"># 如果配置不同的域名地址, 或某个地址别名 Hostname 应该为原地址而不是别名 例如: Host 使用 ling5821.github.com 作为 github.com 的别名  Hostname 应# 该为 github.com</span>
<span class="line">Host github.com *.github.com</span>
<span class="line">    User git</span>
<span class="line">    Port 22</span>
<span class="line">    Hostname %h</span>
<span class="line">    IdentityFile ~/.ssh/id_rsa</span>
<span class="line">    ProxyCommand connect -S 127.0.0.1:10808 %h %p</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>WSL2</p><p><s>wsl2 中有一个问题，这里 wsl2 实际上是蹭用主机的代理，wsl2 相比 wsl1 在网络上发生了变化，导致访问windows需要知道具体的IP，所以这里的 winip 应该更换为对应的主机 (windows) 的IP地址，我更多情况下会将其设置为域名，然后只在 windows 上更改 hosts 文件并同步到wsl中即可，但是如果切换网络，切换 wifi 之后需要重新配置，参考过一些文章可以通过 <code>/etc/resolv.conf</code> 获取 winip ，实际测试并未成功，因为我的 <code>/etc/resolv.conf</code> 之前因为 wsl2 无法访问互联网，所以修改过其中的 DNS 值，并取消了自动生成的机制</s><br></p><p>如果不自定义 <code>/etc/resolv.conf</code> 可以通过 <code>cat /etc/resolv.conf | grep nameserver | awk &#39;{ print $2 }&#39;</code> 获取宿主机IP, wsl2 默认配置在/etc/resolv.conf文件中的是一个代理,所以如果 wsl2 镜像源无法使用或者无法访问外网, 我们只需要去更改主机的DNS, 而不必去修改 /etc/resolv.conf 文件</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"># 编辑文件地址 ~/.ssh/config</span>
<span class="line">Host github.com *.github.com</span>
<span class="line">    User git</span>
<span class="line">    Port 22</span>
<span class="line">    Hostname %h</span>
<span class="line">    IdentityFile ~/.ssh/id_rsa</span>
<span class="line">    ProxyCommand nc -v -x winip:10808 %h %p</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="代理设置脚本" tabindex="-1"><a class="header-anchor" href="#代理设置脚本"><span>代理设置脚本</span></a></h3><p>在 <code>~/.bashrc</code> 中添加:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">proxy</span><span class="token operator">=</span><span class="token string">&quot;source /path/to/proxy.sh&quot;</span></span>
<span class="line"><span class="token builtin class-name">.</span> /path/to/proxy.sh <span class="token builtin class-name">set</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>脚本内容如下:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token assign-left variable">hostip</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/resolv.conf <span class="token operator">|</span> <span class="token function">grep</span> nameserver <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{ print $2 }&#39;</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">wslip</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span> <span class="token parameter variable">-I</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $1}&#39;</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">10809</span></span>
<span class="line"><span class="token assign-left variable">socket_port</span><span class="token operator">=</span><span class="token number">10808</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">PROXY_HTTP</span><span class="token operator">=</span><span class="token string">&quot;http://<span class="token variable">\${hostip}</span>:<span class="token variable">\${http_port}</span>&quot;</span></span>
<span class="line"><span class="token assign-left variable">PROXY_SOCKET</span><span class="token operator">=</span><span class="token string">&quot;socks5://<span class="token variable">\${hostip}</span>:<span class="token variable">\${socket_port}</span>&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token function-name function">set_proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">#export http_proxy=&quot;\${PROXY_HTTP}&quot;</span></span>
<span class="line">    <span class="token comment">#export HTTP_PROXY=&quot;\${PROXY_HTTP}&quot;</span></span>
<span class="line">    <span class="token comment">#export https_proxy=&quot;\${PROXY_HTTP}&quot;</span></span>
<span class="line">    <span class="token comment">#export HTTPS_PROXY=&quot;\${PROXY_HTTP}&quot;</span></span>
<span class="line">    <span class="token comment">#export SOCKET_PROXY=&quot;\${PROXY_SOCKET}&quot;</span></span>
<span class="line">    <span class="token builtin class-name">export</span> <span class="token assign-left variable">PROXY_HOST_IP</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">\${hostip}</span>&quot;</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy <span class="token string">&quot;<span class="token variable">\${PROXY_HTTP}</span>&quot;</span></span>
<span class="line">    <span class="token function">git</span> config <span class="token parameter variable">--global</span> https.proxy <span class="token string">&quot;<span class="token variable">\${PROXY_HTTP}</span>&quot;</span></span>
<span class="line"></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">\${PROXY_HOST_IP}</span> winip&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/hosts</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function-name function">unset_proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">#unset http_proxy</span></span>
<span class="line">    <span class="token comment">#unset HTTP_PROXY</span></span>
<span class="line">    <span class="token comment">#unset https_proxy</span></span>
<span class="line">    <span class="token comment">#unset HTTPS_PROXY</span></span>
<span class="line">    <span class="token comment">#unset SOCKET_PROXY</span></span>
<span class="line">    <span class="token builtin class-name">unset</span> PROXY_HOST_IP</span>
<span class="line"></span>
<span class="line">    <span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> http.proxy</span>
<span class="line">    <span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> https.proxy</span>
<span class="line"></span>
<span class="line">    <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;/winip/d&#39;</span> /etc/hosts</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function-name function">test_setting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Host ip:&quot;</span> <span class="token variable">\${hostip}</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">&quot;WSL ip:&quot;</span> <span class="token variable">\${wslip}</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Current proxy: http: &quot;</span> <span class="token variable">$PROXY_HTTP</span> <span class="token string">&quot;socket: &quot;</span> <span class="token variable">$PROXY_SOCKET</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;set&quot;</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">then</span></span>
<span class="line">    set_proxy</span>
<span class="line"></span>
<span class="line"><span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;unset&quot;</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">then</span></span>
<span class="line">    unset_proxy</span>
<span class="line"></span>
<span class="line"><span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;test&quot;</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">then</span></span>
<span class="line">    test_setting</span>
<span class="line"><span class="token keyword">else</span></span>
<span class="line">    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Unsupported arguments.&quot;</span></span>
<span class="line"><span class="token keyword">fi</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题"><span>常见问题</span></a></h2><ol><li><p>没有共同祖先的分支进行pull操作时需要添加--allow-unrelated-histories,也就是当本地仓库已经存在，而又重新创建一个新的远程仓库，当该远程仓库已经有提交历史时，这个仓库和本地仓库不是同源的分支，再pull是被拒绝的</p></li><li><p>git子模块批量添加远程仓库</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/usr/bin/env bash</span></span>
<span class="line"><span class="token assign-left variable">remote_name</span><span class="token operator">=</span><span class="token variable">$1</span></span>
<span class="line"><span class="token assign-left variable">remote_url</span><span class="token operator">=</span><span class="token variable">$2</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">modules</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> submodule  <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $2 }&#39;</span><span class="token variable">)</span></span></span>
<span class="line"><span class="token keyword">for</span> <span class="token for-or-select variable">module</span> <span class="token keyword">in</span> <span class="token variable">\${modules<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">do</span></span>
<span class="line"> <span class="token builtin class-name">cd</span> ./<span class="token variable">$module</span></span>
<span class="line"> <span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$remote_url</span>/<span class="token variable">$module</span>.git&quot;</span></span>
<span class="line"> <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$module</span> <span class="token operator">==</span>  jetlinks-manager* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">     <span class="token assign-left variable">url</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$remote_url</span>/&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $module <span class="token operator">|</span> <span class="token function">awk</span> <span class="token parameter variable">-F</span> <span class="token string">&#39;/&#39;</span> <span class="token string">&#39;{print $2}&#39;</span><span class="token variable">)</span></span><span class="token string">&quot;.git&quot;</span></span>
<span class="line"> <span class="token keyword">fi</span></span>
<span class="line"> <span class="token builtin class-name">echo</span> <span class="token variable">$url</span></span>
<span class="line"> <span class="token function">git</span> remote <span class="token function">add</span> <span class="token variable">$remote_name</span> <span class="token variable">$url</span></span>
<span class="line"> <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span></span>
<span class="line"> <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$module</span> <span class="token operator">==</span>  jetlinks-manager* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span></span>
<span class="line">     <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span></span>
<span class="line"> <span class="token keyword">fi</span></span>
<span class="line"><span class="token keyword">done</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>git clone 代码自动转换为CRLF</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 全局关闭Git自动转换功能</span></span>
<span class="line"><span class="token function">git</span> config <span class="token parameter variable">--global</span> core.autocrlf <span class="token boolean">false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>`,14)]))}const o=n(p,[["render",i]]),r=JSON.parse('{"path":"/tool/git.html","title":"","lang":"en-US","frontmatter":{},"git":{"updatedTime":1754642790000,"contributors":[{"name":"lsj","username":"lsj","email":"lishaojie@aithu.com","commits":1,"url":"https://github.com/lsj"}],"changelog":[{"hash":"68c8fe668940c6c2d5e4fcf94e88aebaeecb290d","time":1754642790000,"email":"lishaojie@aithu.com","author":"lsj","message":"updte"}]},"filePathRelative":"tool/git.md"}');export{o as comp,r as data};
