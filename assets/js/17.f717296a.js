(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{371:function(t,s,a){"use strict";a.r(s);var n=a(44),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"jvm性能调优-todo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jvm性能调优-todo"}},[t._v("#")]),t._v(" JVM性能调优 TODO")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("# java8 以前 应当设置 -XX:PermSize -XX:MaxPermSize\n# java8 以后 应当设置 -XX:MaxMetaspaceSize -XX:MetaspaceSize\n\n# 1. Java堆大小设置，Xms和Xmx设置为老年代存活对象的3-4倍，即FullGC之后的老年代内存占用的3-4倍\n# 2. 永久代(元空间) PermSize和MaxPermSize / MetaspaceSize和MaxMetaspaceSize 设置为老年代存活对象的1.2-1.5倍。\n# 3. 年轻代Xmn的设置为老年代存活对象的1-1.5倍。\n# 4. 老年代的内存大小设置为老年代存活对象的2-3倍。\n\n# 假如 jstat -gc 1234\n\nOU 为 905371.7 900M\n\njvm配置为\n-XX:MetaspaceSize=1536M -XX:MaxMetaspaceSize=1536M\n-Xms4096m -Xmx4096m\n\n-XX:MetaspaceSize=180M -XX:MaxMetaspaceSize=180M -Xms512m -Xmx512m\n\n")])])]),a("h2",{attrs:{id:"自行编译jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自行编译jdk"}},[t._v("#")]),t._v(" 自行编译JDK")]),t._v(" "),a("ol",[a("li",[t._v("编译参数设置")])]),t._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[t._v("export LANG"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("C")]),t._v("\nexport ALT_BOOTDIR"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/usr/share/java")]),t._v("\nexport ALLOW_DOWNLOADS"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\nexport HOTSPOT_BUILD_JOBS"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("8")]),t._v("\nexport ALT_PARALLEL_COMPILE_JOBS"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("8")]),t._v("\nexport SKIP_COMPARE_IMAGES"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用预编译头文件 编译加快")]),t._v("\nexport USE_PRECOMPILED_HEADER"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要编译的内容")]),t._v("\nexport BUILD_LANGTOOLS"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export BUILD_JAXP=false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export BUILD_JAXWS=false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export BUILD_CORBA=false")]),t._v("\nexport BUILD_HOTSPOT"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\nexport BUILD_JDK"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#要编译的版本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export SKIP_DEBUG_BUILD=false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export SKIP_FASTDEBUG_BUILD=true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#export DEBUG_NAME=debug")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置为false可以避开javaws和浏览器Java插件的build")]),t._v("\nexport BUILD_DEPLOY"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置为false不会build出安装包 安装包中有一些奇怪的依赖")]),t._v("\nexport BUILD_INSTALL"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("false")]),t._v("\nexport ALT_OUTPUTDIR"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("/home/ling/jdk/build")]),t._v("\nexport DEBUG_BINARIES"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置HotSpot编译为64位版本")]),t._v("\nexport LP64"),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("1")]),t._v("\n\n./configure --enable-debug 创建编译配置 不指定参数构建为release版本\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("编译成功的提示")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("----- Build "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("times")]),t._v(" -------\nStart "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-03-14 03:31:24\nEnd   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-03-14 03:44:35\n00:00:48 corba\n00:05:41 hotspot\n00:00:43 jaxp\n00:01:11 jaxws\n00:04:46 jdk\n00:00:01 langtools\n00:13:11 TOTAL\n-------------------------\nFinished building OpenJDK "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),t._v("\n\nWARNING: You have the following ALT_ variables set:\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALT_PARALLEL_COMPILE_JOBS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALT_BOOTDIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/share/java "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALT_OUTPUTDIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/ling/jdk/build\nALT_ variables are deprecated and will be ignored. Please clean your environment.\n\n\nling@aidong:~/jdk$ /home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/jdk/bin/javac ./HelloWorld.java\nling@aidong:~/jdk$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\nASSEMBLY_EXCEPTION  HelloWorld.java  Makefile  README-builds.html  build   configure  get_source.sh  jaxp   jdk        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\nHelloWorld.class    LICENSE          README    THIRD_PARTY_README  common  corba      hotspot        jaxws  langtools  nashorn\nling@aidong:~/jdk$ java HelloWorld\nHelloWorld openjdk\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("运行虚拟机")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加环境变量")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LD_LIBRARY_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_HOME}")]),t._v("/jre/lib/amd64/native_threads:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_HOME}")]),t._v("/jre/lib/amd64\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("编译错误汇总")]),t._v(" "),a("ul",[a("li",[t._v("ubuntu内核版本过高")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" *** This OS is not supported: Linux aidong "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.4")]),t._v(".0-18362-Microsoft "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#476-Microsoft Fri Nov 01 16:53:00 PST 2019 x86_64 x86_64 x86_64 GNU/Linux")]),t._v("\n /home/ling/jdk/hotspot/make/linux/Makefile:234: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'check_os_version'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("check_os_version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("linux_amd64_compiler2/debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n /home/ling/jdk/hotspot/make/linux/Makefile:255: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'linux_amd64_compiler2/debug'")]),t._v(" failed\n Makefile:216: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'generic_build2'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("generic_build2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n Makefile:167: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fastdebug'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fastdebug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n HotspotWrapper.gmk:44: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp'")]),t._v(" failed\n /home/ling/jdk//make/Main.gmk:108: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotspot-only'")]),t._v(" failed\n make: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hotspot-only"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案:vim make/linux/Makefile")]),t._v("\n :/SUPPORTED_OS_VERSION 搜索改关键字\n - SUPPORTED_OS_VERSION "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.4")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.6")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("%\n + SUPPORTED_OS_VERSION "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.4")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.5")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.6")]),t._v("% "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("%\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案:vim xxx/hotspot/make/linux/Makefile 67行")]),t._v("\n")])])]),a("ul",[a("li",[t._v("make版本的问题，4.0以后make-I和-j选项混乱")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" /usr/bin/make: invalid option -- "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),t._v("\n /usr/bin/make: invalid option -- "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v("\n /usr/bin/make: invalid option -- "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),t._v("\n /usr/bin/make: invalid option -- "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'c'")]),t._v("\n Usage: "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n Options:\n -b, -m                      Ignored "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" compatibility.\n -B, --always-make           Unconditionally "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" all targets.\n -C DIRECTORY, --directory"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DIRECTORY\n                             Change to DIRECTORY before doing anything.\n -d                          Print lots of debugging information.\n --debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FLAGS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("             Print various types of debugging information.\n -e, --environment-overrides\n                             Environment variables override makefiles.\n --eval"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("STRING               Evaluate STRING as a makefile statement.\n -f FILE, --file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FILE, --makefile"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FILE\n                             Read FILE as a makefile.\n -h, --help                  Print this message and exit.\n -i, --ignore-errors         Ignore errors from recipes.\n -I DIRECTORY, --include-dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("DIRECTORY\n                             Search DIRECTORY "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" included makefiles.\n -j "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", --jobs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("N"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("          Allow N "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" at once"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" infinite "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" with no arg.\n -k, --keep-going            Keep going when some targets can"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t be made.\n -l [N], --load-average[=N], --max-load[=N]\n                             Don'")]),t._v("t start multiple "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" unless load is below N.\n -L, --check-symlink-times   Use the latest mtime between symlinks and target.\n -n, --just-print, --dry-run, --recon\n                             Don"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t actually run any recipe; just print them.\n -o FILE, --old-file=FILE, --assume-old=FILE\n                             Consider FILE to be very old and don'")]),t._v("t remake it.\n -O"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", --output-sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("TYPE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                             Synchronize output of parallel "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jobs")]),t._v(" by TYPE.\n -p, --print-data-base       Print "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s internal database.\n -q, --question              Run no recipe; exit status says if up to date.\n -r, --no-builtin-rules      Disable the built-in implicit rules.\n -R, --no-builtin-variables  Disable the built-in variable settings.\n -s, --silent, --quiet       Don'")]),t._v("t "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" recipes.\n -S, --no-keep-going, --stop\n                             Turns off -k.\n -t, --touch                 Touch targets instead of remaking them.\n --trace                     Print tracing information.\n -v, --version               Print the version number of "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" and exit.\n -w, --print-directory       Print the current directory.\n --no-print-directory        Turn off -w, even "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" it was turned on implicitly.\n -W FILE, --what-if"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FILE, --new-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FILE, --assume-new"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("FILE\n                             Consider FILE to be infinitely new.\n --warn-undefined-variables  Warn when an undefined variable is referenced.\n\n This program built "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" x86_64-pc-linux-gnu\n Report bugs to "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("bug-make@gnu.org"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ad_stuff"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n /home/ling/jdk/hotspot/make/linux/makefiles/top.make:91: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ad_stuff'")]),t._v(" failed\n /home/ling/jdk/hotspot/make/linux/Makefile:289: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fastdebug'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fastdebug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n Makefile:216: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'generic_build2'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("generic_build2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fastdebug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n Makefile:167: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fastdebug'")]),t._v(" failed\n HotspotWrapper.gmk:44: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n /home/ling/jdk//make/Main.gmk:108: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotspot-only'")]),t._v(" failed\n make: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hotspot-only"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案一: 降级make4.0以下(未测试)")]),t._v("\n \n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案二:")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" xxx/hotspot/make/linux/makefiles/adjust-mflags.sh\n - s/ -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("^     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("^     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("j/ -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -j/\n + s/ -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("^     I"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("^     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("j/ -"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" -j/\n")])])]),a("ul",[a("li",[t._v("gcc/g++ 版本过高")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" In "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" included from /home/ling/jdk/hotspot/src/share/vm/memory/sharedHeap.hpp:29:0,\n         from /home/ling/jdk/hotspot/src/share/vm/gc_implementation/parallelScavenge/psParallelCompact.hpp:34,\n         from /home/ling/jdk/hotspot/src/share/vm/gc_implementation/shared/markSweep.inline.hpp:33,\n         from /home/ling/jdk/hotspot/src/share/vm/oops/oop.inline.hpp:29,\n         from /home/ling/jdk/hotspot/src/share/vm/classfile/classFileParser.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/classfile/classLoader.hpp:28,\n         from /home/ling/jdk/hotspot/src/share/vm/classfile/systemDictionary.hpp:29,\n         from /home/ling/jdk/hotspot/src/share/vm/ci/ciEnv.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/ci/ciUtilities.hpp:28,\n         from /home/ling/jdk/hotspot/src/share/vm/ci/ciNullObject.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/ci/ciConstant.hpp:29,\n         from /home/ling/jdk/hotspot/src/share/vm/ci/ciArray.hpp:29,\n         from /home/ling/jdk/hotspot/src/share/vm/precompiled/precompiled.hpp:33:\n /home/ling/jdk/hotspot/src/share/vm/memory/generation.hpp:421:17: error: invalid suffix on literal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" C++11 requires a space between literal and string macro "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-Werror"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("literal-suffix"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n         warning"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time warp: "')]),t._v("INT64_FORMAT"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" to "')]),t._v("INT64_FORMAT, _time_of_last_gc, now"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n              ^\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里出现问题的原因是ubuntu版本过高,18.04默认的gcc/g++版本为7.0")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行降级操作")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc-4.8\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" g++-4.8\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n 降级操作后需要重新执行./configure --enable-debug 否则版本即使gcc/g++ --version变了还是会报错\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tee")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ALT_OUTPUTDIR")]),t._v("/build.log\n")])])]),a("ul",[a("li",[t._v("make错误")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" In "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" included from /home/ling/jdk/hotspot/src/share/vm/utilities/histogram.hpp:32:0,\n         from /home/ling/jdk/hotspot/src/share/vm/runtime/mutex.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/classfile/classLoaderData.hpp:32,\n         from /home/ling/jdk/hotspot/src/share/vm/oops/typeArrayKlass.hpp:28,\n         from /home/ling/jdk/hotspot/src/share/vm/oops/typeArrayOop.hpp:29,\n         from /home/ling/jdk/hotspot/src/share/vm/oops/constantPool.hpp:32,\n         from /home/ling/jdk/hotspot/src/share/vm/oops/method.hpp:33,\n         from /home/ling/jdk/hotspot/src/share/vm/runtime/frame.hpp:28,\n         from /home/ling/jdk/hotspot/src/share/vm/code/codeBlob.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/code/codeCache.hpp:28,\n         from /home/ling/jdk/hotspot/src/cpu/x86/vm/assembler_x86.inline.hpp:30,\n         from /home/ling/jdk/hotspot/src/share/vm/asm/assembler.inline.hpp:31,\n         from /home/ling/jdk/hotspot/src/share/vm/precompiled/precompiled.hpp:30:\n /home/ling/jdk/hotspot/src/os/linux/vm/os_linux.inline.hpp: In static member "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'static dirent* os::readdir(DIR*, dirent*)'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v("\n /home/ling/jdk/hotspot/src/os/linux/vm/os_linux.inline.hpp:142:18: error: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'int readdir_r(DIR*, dirent*, dirent**)'")]),t._v(" is deprecated "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("declared at /usr/include/dirent.h:183"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-Werror"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("deprecated-declarations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("readdir_r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dbuf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                 ^\n /home/ling/jdk/hotspot/src/os/linux/vm/os_linux.inline.hpp:142:42: error: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'int readdir_r(DIR*, dirent*, dirent**)'")]),t._v(" is deprecated "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("declared at /usr/include/dirent.h:183"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-Werror"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("deprecated-declarations"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v("status "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("readdir_r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dbuf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                         ^\n cc1plus: all warnings being treated as errors\n /home/ling/jdk/hotspot/make/linux/makefiles/vm.make:295: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'precompiled.hpp.gch'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("precompiled.hpp.gch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n /home/ling/jdk/hotspot/make/linux/makefiles/top.make:119: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the_vm'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("the_vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fastdebug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n /home/ling/jdk/hotspot/make/linux/Makefile:289: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fastdebug'")]),t._v(" failed\n Makefile:216: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'generic_build2'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("generic_build2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("fastdebug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n Makefile:167: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fastdebug'")]),t._v(" failed\n HotspotWrapper.gmk:44: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("/home/ling/jdk/build/linux-x86_64-normal-server-fastdebug/hotspot/_hotspot.timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n /home/ling/jdk//make/Main.gmk:108: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hotspot-only'")]),t._v(" failed\n make: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("hotspot-only"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n \n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案:")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" xxx/hotspot/make/linux/makefiles/gcc.make\n 注释 WARNINGS_ARE_ERRORS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" -Werror\n 或者 WARNINGS_ARE_ERRORS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" -Wno-all  \n 相关Warning都可以通过这个关闭\n")])])]),a("ul",[a("li",[t._v("单独编译JAVA虚拟机错误check_j2se_version版本不通过")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v(" /usr/share/java/bin/javap javax.xml.transform.TransformerFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v(" -ne "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n /usr/share/java/bin/java -version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*** An XSLT processor (J2SE 1.4.x or newer) is required"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to bootstrap this build"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n /bin/sh: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(": /usr/share/java/bin/java: not found\n *** An XSLT processor "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("J2SE "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.4")]),t._v(".x or newer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" is required to bootstrap this build\n /home/ling/jdk/hotspot/make/linux/Makefile:241: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'check_j2se_version'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("check_j2se_version"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build'")]),t._v("\n /home/ling/jdk/hotspot/make/linux/Makefile:255: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'linux_i486_compiler2/debug'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("linux_i486_compiler2/debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build'")]),t._v("\n Makefile:216: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'generic_build2'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("generic_build2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/hotspot/make'")]),t._v("\n Makefile:167: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),t._v(" failed\n make: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("product"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n \n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方案:")]),t._v("\n ALT_BOOTDIR需要配置正确的jdk路径\n apt-get安装的java路径默认为 /usr/lib/jvm/java-8-openjdk-amd64/bin\n")])])]),a("ul",[a("li",[t._v("单独构建虚拟机报错:默认构建32版本的HotSpot 未安装32位lib是报错")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("In "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" included from /home/ling/jdk/hotspot/src/share/vm/prims/jni.h:39:0,\n              from /home/ling/jdk/hotspot/src/share/vm/prims/jvm.h:28,\n              from /home/ling/jdk/hotspot/src/share/vm/utilities/debug.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/runtime/globals.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/memory/allocation.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/memory/iterator.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/memory/genOopClosures.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/oops/klass.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/runtime/handles.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/memory/universe.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/code/oopRecorder.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/asm/codeBuffer.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/asm/assembler.hpp:28,\n              from /home/ling/jdk/hotspot/src/share/vm/precompiled/precompiled.hpp:29:\n /usr/include/stdio.h:27:36: fatal error: bits/libc-header-start.h: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include <bits/libc-header-start.h>")]),t._v("\n                                     ^\n compilation terminated.\n /home/ling/jdk/hotspot/make/linux/makefiles/vm.make:295: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'precompiled.hpp.gch'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("precompiled.hpp.gch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build/linux_i486_compiler2/product'")]),t._v("\n /home/ling/jdk/hotspot/make/linux/makefiles/top.make:119: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'the_vm'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("the_vm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build/linux_i486_compiler2/product'")]),t._v("\n /home/ling/jdk/hotspot/make/linux/Makefile:289: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("product"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/build'")]),t._v("\n Makefile:216: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'generic_build2'")]),t._v(" failed\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("generic_build2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n make"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/ling/jdk/hotspot/make'")]),t._v("\n Makefile:167: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'product'")]),t._v(" failed\n make: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("product"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方式一:")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc-multilib 这样构建的是32位版本\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解决方式二:")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("LP64")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);