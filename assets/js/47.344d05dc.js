(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{328:function(s,a,t){"use strict";t.r(a);var e=t(10),l=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"wsl-常见问题汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wsl-常见问题汇总"}},[s._v("#")]),s._v(" WSL 常见问题汇总")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("docker 启动 es 出现 "),a("code",[s._v("max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]")])]),s._v(" "),a("p",[s._v("通常的做法")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysctl.conf\n增加 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("vm.max_map_count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("262144")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sysctl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v("\n")])])]),a("p",[s._v("以上方法在 WSL 中如果重启就会失效，在 WSL 请使用以下方法")]),s._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 修改或添加 %userprofile%/.wslconfig\n[wsl2]\nkernelCommandLine = "sysctl.vm.max_map_count=262144"\n')])])])]),s._v(" "),a("li",[a("p",[s._v("WSL2 Docker释放磁盘空间")]),s._v(" "),a("blockquote",[a("p",[s._v("参考 https://github.com/microsoft/WSL/issues/4699#issuecomment-627133168")])]),s._v(" "),a("ol",[a("li",[s._v("删除Docker中的无用镜像")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" system prune\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("退出 Docker Desktop, 并关停 WSL2 实例")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 关停 WSL2")]),s._v("\nwsl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--shutdown")]),s._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("命令行输入 diskpart, 进入 diskpart 工具")])]),s._v(" "),a("div",{staticClass:"language-cmd extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('select vdisk file="C:\\Users\\<你的用户名>\\AppData\\Local\\Docker\\wsl\\data\\ext4.vhdx"\nattach vdisk readonly\ncompact vdisk\ndetach vdisk\n')])])]),a("p",[a("img",{attrs:{src:"https://ling-root-bucket.oss-cn-hangzhou.aliyuncs.com/picgo/20230519124624.png",alt:""}})])])])])}),[],!1,null,null,null);a.default=l.exports}}]);